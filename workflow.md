graph TD
    A[웹 앱 접속 / 로그인] --> B{카메라 접근 권한 허용};
    B -- 거부 --> C[수동 이미지 업로드 권유];
    B -- 허용 --> D[스마트 캡처 모드 진입];
    C --> D;
    
    D --> E{실시간 조명 및 환경 진단};
    E -- 역광/어두움 --> F[경고 UI: 밝은 곳으로 이동 안내];
    F --> D;
    E -- 적합 --> G[안면 가이드라인 매칭 및 캡처];
    
    G --> H[서버 전송 및 분석 시작];
    
    %% 분기점: 클라이언트와 서버의 동시 동작
    H --> |Client View| I[인터랙티브 로딩 화면 재생];
    H --> |Server Process| J[OpenCV: 화이트밸런스 보정];
    
    I -.-> |v0.app 화려한 UI + Zustand 상태관리| K;
    
    J --> L[MediaPipe: 안면/피부/헤어 랜드마크 추출];
    L --> M[ONNX Runtime: 4계절 컬러 고속 추론];
    
    M --> N[결과 데이터 도출 및 원본 이미지 즉각 파기];
    
    N --> K[결과 화면 렌더링];
    K --> O[화면 70% 비중의 컬러 팔레트 연출];
    O --> P[맞춤형 큐레이션 제공];
    P --> Q[결과 데이터 DB 저장];
