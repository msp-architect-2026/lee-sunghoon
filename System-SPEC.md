# System-Specification

본 문서는 서비스에 도입된 각 기술 스택이 **어떠한 비즈니스 가치**를 제공하며, 실제 **사용자 화면(UI/UX)**에서 어떻게 구동되는지 상세히 정의합니다.

---

## 1. Frontend Layer (사용자 접점)
사용자가 직접 보고 만지는 영역으로, **초기 진입 속도**와 **부드러운 상태 전환**에 집중합니다.

| 기술 | UI 구동 및 역할 | 상세 스펙 및 [사용하는 이유] |
| :--- | :--- | :--- |
| **Next.js** | 페이지 간 이동이 즉각적이며, 첫 화면 로딩 시 지연 시간을 최소화합니다. | **SSR/SSG 지원**: 모바일 최우선 반응형 렌더링 및 빠른 초기 로딩 속도를 확보하여 사용자 이탈을 방지합니다. |
| **Tailwind CSS & v0.app** | 모든 기기에서 일관된 톤앤매너를 유지하며, 세련된 애니메이션을 제공합니다. | **고속 스타일링**: AI 분석 대기 시간을 상쇄할 화려하고 인터랙티브한 UI 컴포넌트를 신속하게 구축합니다. |
| **Zustand** | "현재 조명 밝기", "분석 진척도" 등의 데이터를 실시간으로 UI에 업데이트합니다. | **경량 상태 관리**: 복잡한 전역 상태를 보일러플레이트 없이 가볍게 관리하여 클라이언트 부하를 줄입니다. |
| **NextAuth.js** | "로그인 후 결과 저장" 기능을 위해 간편한 소셜 연동을 지원합니다. | **OAuth 통합**: 사용자별 진단 이력을 DB와 정확히 매핑하고 보안 인증 프로세스를 간소화합니다. |



---

## 2. Network & Business Layer (관문 및 비즈니스 로직)
사용자의 요청을 안전하게 수용하고 AI 연산 부하를 관리하는 **서비스의 허리**입니다.

| 기술 | UI 구동 및 역할 | 상세 스펙 및 [사용하는 이유] |
| :--- | :--- | :--- |
| **Nginx Ingress** | 사용자가 접속하는 경로(/api, /)에 따라 프론트/백엔드로 자동 분기합니다. | **L7 로드밸런싱**: 외부 트래픽을 K8s 내부 파드로 정확히 라우팅하여 안정적인 트래픽 분산을 실현합니다. |
| **FastAPI** | 촬영 버튼 클릭 시 "요청 접수" 응답을 즉시 보내 화면 멈춤을 방지합니다. | **고성능 비동기**: Python AI 생태계와 호환되며, 병목 없이 대량의 동시 요청을 수용합니다. |
| **BackgroundTasks** | 로딩 페이지가 돌아가는 동안 서버 뒷단에서 실제 분석을 수행합니다. | **Non-blocking 처리**: 무거운 큐 시스템 없이도 AI 연산을 백그라운드로 넘겨 API 응답성을 극대화합니다. |

---

## 3. AI Analysis & Data Layer (지능형 분석 및 저장)
가장 핵심적인 **진단 결과의 정확도**와 **데이터 신뢰성**을 담당합니다.

| 기술 | UI 구동 및 역할 | 상세 스펙 및 [사용하는 이유] |
| :--- | :--- | :--- |
| **OpenCV** | 어떤 환경에서 촬영해도 표준화된 피부 톤 데이터를 추출할 수 있게 보정합니다. | **전처리 정규화**: 조명 변수를 통제하고 화이트밸런스를 보정하여 데이터 일관성을 확보합니다. |
| **MediaPipe** | 카메라 화면 위로 실시간 얼굴 가이드라인(Mesh)을 그려 정확한 촬영을 돕습니다. | **랜드마크 추출**: 피부, 눈동자, 머리카락 영역을 초고속으로 분리하여 분석 정확도를 높입니다. |
| **ONNX Runtime** | 분석 시작 후 1초 이내에 결과 페이지로 전환될 수 있도록 모델을 가속합니다. | **추론 최적화**: 무거운 모델을 최적화 포맷으로 변환하여 추론 속도 단축 및 인프라 비용을 절감합니다. |
| **PostgreSQL** | 사용자가 언제든 과거 진단 결과와 추천 아이템 정보를 다시 확인할 수 있게 합니다. | **RDBMS**: 진단 메타데이터 및 통계 데이터를 무결성 있게 보관합니다. (원본 이미지는 즉시 파기) |



---

## 4. DevOps & Infrastructure (인프라 및 배포)
서비스의 **가용성**을 보장하고 **지속적인 업데이트**를 가능케 하는 기반입니다.

| 기술 | UI 구동 및 역할 | 상세 스펙 및 [사용하는 이유] |
| :--- | :--- | :--- |
| **Kubernetes (K8s)** | 갑작스러운 바이럴로 사용자가 몰려도 서버 다운 없이 원활한 접속을 유지합니다. | **오케스트레이션**: 트래픽 스파이크 발생 시 파드(Pod)를 자동 스케일아웃하여 가용성을 보장합니다. |
| **Helm Chart** | 개발/운영 환경의 설정 차이로 인한 버그를 방지하여 안정적인 기능을 제공합니다. | **패키징 관리**: 복잡한 매니페스트를 변수화하여 환경별 배포 규격화 및 관리 효율성을 극대화합니다. |
| **GitLab CI & ArgoCD** | 새로운 기능이 추가될 때 서비스 중단 없이 즉시 사용자에게 반영됩니다. | **GitOps/CD**: 코드 푸시와 동시에 클러스터 상태를 동기화하여 무중단 배포를 실현합니다. |



---

## 🛡️ 데이터 보안 및 파기 정책
본 프로젝트는 **Privacy-First** 원칙을 준수합니다.
1. 사용자가 전송한 안면 이미지는 **메모리(BytesIO)** 상에서만 처리됩니다.
2. 분석 함수가 종료되는 즉시 해당 메모리는 비워지며, 어떠한 물리 스토리지에도 저장되지 않습니다.
3. 데이터베이스에는 분석의 결과값(Color Code, Type)만을 저장하여 개인정보 유출 위험을 원천 차단합니다.
